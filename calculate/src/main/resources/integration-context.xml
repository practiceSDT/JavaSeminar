<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:int="http://www.springframework.org/schema/integration"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:aop="http://www.springframework.org/schema/aop"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.2.xsd
		http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.2.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration-4.2.xsd">

    <!-- Component scan to find all Spring components 
    <context:component-scan base-package="study.spring" />
-->
	<aop:aspectj-autoproxy/>
	<bean id="myAspect" class="study.spring.aop.ControllerAspect">
	</bean>
    <!-- A Spring Integration channel -->
    <int:channel id="requestChannel" />

    <!-- A Spring Integration adapter that routes messages sent to the helloWorldChannel to the bean named "helloServiceImpl"'s hello() method -->
    <int:service-activator id="reciveDataSA"
    	input-channel="requestChannel" ref="reciveDataEntry"
    	output-channel="outputChannel" />

    <int:channel id="outputChannel"></int:channel>
    <int:service-activator id="calculateDataSA" input-channel="outputChannel" ref="calculateDataEntry" output-channel="replyChannel"></int:service-activator>

    <int:gateway id="dtoGateway"
    	service-interface="study.spring.entry.IDtoCollectorGateway"
    	error-channel="failedChannel" default-reply-channel="replyChannel"
    	default-request-channel="requestChannel">
    	
	</int:gateway>
    <int:channel id = "failedChannel" />
    <int:service-activator input-channel="failedChannel"
    	ref="failedHandler" id="failedHandlerSA"
    	output-channel="failedOutChannel" />

    <int:channel id="replyChannel"></int:channel>
	<int:channel id="failedOutChannel"></int:channel>
</beans>
